(this.webpackJsonpportofolio_admin=this.webpackJsonpportofolio_admin||[]).push([[0],{132:function(e,a,t){e.exports=t(263)},137:function(e,a,t){},138:function(e,a,t){},142:function(e,a,t){},144:function(e,a,t){},260:function(e,a,t){},263:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(18),c=t.n(o),l=(t(137),t(21)),i=(t(138),t(13)),s=t(8),u=t(22),m=(t(142),t(281)),d=t(284),f=t(285),p=t(286),g=t(287),v=function(e){var a=e.children,t=Object(s.g)();return r.a.createElement("div",{className:"root"},r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"brand"},r.a.createElement("h1",{className:"resp"},"D"),r.a.createElement("h1",null,"Dashboard")),r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",null,r.a.createElement(u.b,{to:"/portofolio_admin/",className:"/portofolio_admin/"===t.pathname?"active":""},r.a.createElement("div",{className:"icon"},r.a.createElement(m.a,null)),r.a.createElement("span",null,"Dashboard"))),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/portofolio_admin/albums",className:"/portofolio_admin/albums"===t.pathname?"active":""},r.a.createElement("div",{className:"icon"},r.a.createElement(d.a,null)),r.a.createElement("span",null,"Albums"))),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/portofolio_admin/gallery",className:"/portofolio_admin/gallery"===t.pathname?"active":""},r.a.createElement("div",{className:"icon"},r.a.createElement(f.a,null)),r.a.createElement("span",null,"Gallery"))),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/portofolio_admin/mail",className:"/portofolio_admin/mail"===t.pathname?"active":""},r.a.createElement("div",{className:"icon"},r.a.createElement(p.a,null)),r.a.createElement("span",null,"Mail"))),r.a.createElement("li",null,r.a.createElement(u.b,{to:"/portofolio_admin/admin",className:"/portofolio_admin/admin"===t.pathname?"active":""},r.a.createElement("div",{className:"icon"},r.a.createElement(g.a,null)),r.a.createElement("span",null,"Admin")))),r.a.createElement("div",{className:"navbar-footer"},r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"row"},r.a.createElement(u.b,{to:"/portofolio_admin/setting"},"Setting"))))),r.a.createElement("div",{className:"main"},a))},b=Object(n.createContext)({});function E(e){var a=e.children,t=Object(n.useState)(!1),o=Object(l.a)(t,2),c=o[0],i=o[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),m=u[0],d=u[1],f=Object(n.useState)(window.innerWidth),p=Object(l.a)(f,2),g=p[0],v=p[1],E={mobile:c,setMobile:i,openDrawer:m,setOpenDrawer:d};return Object(n.useEffect)((function(){function e(){v(window.innerWidth)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[g]),Object(n.useEffect)((function(){i(g<=425)}),[g]),r.a.createElement(b.Provider,{value:E},a)}function h(e){var a=e.children;return r.a.createElement(E,null,a)}E.defaultProps={children:null},h.defaultProps={children:null};t(144);var O=t(291),w=t(292),j=function(e){var a=e.input,t=e.inputProps,n=e.meta,o=n.dirty,c=n.error,l=n.touched;return r.a.createElement(r.a.Fragment,null,t.label&&r.a.createElement("label",null,t.label),r.a.createElement("input",Object.assign({},a,t)),c&&(o||l)&&r.a.createElement("small",{className:"error-field"},c))},y=function(e){var a=e.handleSubmit,t=e.invalid,n=Object(i.d)((function(e){return e.login})),o=n.isLoadingLogin,c=n.message,l=t||o;return r.a.createElement("form",{onSubmit:a,className:"login-form"},r.a.createElement("div",{className:"col-md-12"},function(e,a,t){var n={placeholder:a,autoComplete:"off"};return r.a.createElement("div",{className:"input-group"},r.a.createElement("p",null,t),r.a.createElement(w.a,{component:j,inputProps:n,name:e}))}("email","Email","Email"),function(e,a,t){var n={placeholder:a,autoComplete:"off",type:"password"};return r.a.createElement("div",{className:"input-group"},r.a.createElement("p",null,t),r.a.createElement(w.a,{component:j,type:"password",inputProps:n,name:e}))}("password","Password","Password"),"SUKSESLOGIN"!==c&&c,r.a.createElement("button",{disabled:l,type:"submit",className:"button-submit"},o?"Loading...":"Login")))};var L=Object(O.a)({form:"loginForm",initialValues:{email:"",password:""},validate:function(e){return{email:!e.email&&"Email cant be empty",password:!e.password&&"Password cant be empty"}}})(y),S="Login/Failed",N=t(48),k=t.n(N),I=t(86),x=t(87),P=t.n(x),_="https://gallery-heni.herokuapp.com/api/v1",A={Authorization:"Basic Z2FsbGVyeTpnYWxsZXJ5MjAyMA=="},D={Authorization:localStorage.getItem("gallery-access-token")},W=function(){var e=Object(I.a)(k.a.mark((function e(a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){P.a.post("".concat(_,"/auth/login"),a,{headers:A}).then((function(a){e(a.data)})).catch((function(e){var a={code:500,status:"error",message:"Failed to fetch data. Please contact developer."};e.response&&e.response.data?t(e.response.data):t(a)}))})));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),C=function(){var e=Object(I.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){P.a.get("".concat(_,"/user/detail"),{headers:D}).then((function(a){e(a.data)})).catch((function(e){var t={code:500,status:"error",message:"Failed to fetch data. Please contact developer."};e.response&&e.response.data?a(e.response.data):a(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(e){return function(a){a(function(e,a){return{type:"Login/Loading",isLoading:e,key:a}}(!0,"Login")),W(e).then((function(e){localStorage.setItem("gallery-access-token",e.data.accessToken),a(U("SUKSESLOGIN","Login")),a(U("","LoginAction"))})).catch((function(e){a(U(e.msg,"Login"))}))}};function U(e,a){return{type:S,message:e,key:a}}var T=function(){var e=Object(i.c)(),a=Object(n.useState)(!1),t=Object(l.a)(a,2),o=t[0],c=t[1],u=Object(s.f)(),m=Object(i.d)((function(e){return e.login})).message;return Object(n.useEffect)((function(){if("SUKSESLOGIN"===m){var e=localStorage.getItem("gallery-access-token");if(e){var a=JSON.parse(atob(e.split(".")[1]));localStorage.setItem("gallery-token-exp",a.exp),localStorage.setItem("gallery-user-data",JSON.stringify(a)),u.replace("/")}else u.replace("/login")}}),[m,u]),Object(n.useEffect)((function(){var e=localStorage.getItem("gallery-access-token");if(e){var a=JSON.parse(atob(e.split(".")[1]));localStorage.setItem("gallery-token-exp",a.exp),localStorage.setItem("gallery-user-data",JSON.stringify(a)),u.replace("/")}else u.replace("/login")}),[u]),r.a.createElement("div",{className:"login-dash"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("div",{className:"login-hero"})),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("div",{className:"login-card"},r.a.createElement("div",{className:"login-title"},o?r.a.createElement("h1",null,"Forgot your password?"):r.a.createElement("h1",null,"Upload your image now!")),o?"":r.a.createElement(r.a.Fragment,null,r.a.createElement(L,{onSubmit:function(a){e(F(a))}}),r.a.createElement("div",{className:"help-text",onClick:function(e){e.preventDefault(),c(!0)}},r.a.createElement("p",null,"Forgot your password ?")))))))},G=(t(260),t(295)),J=t(293),M=t(296),z=t(290),R=t(297),B=t(288),K=t(289),V=function(e){var a=e.title,t=Object(n.useState)(null),o=Object(l.a)(t,2),c=o[0],u=o[1],m=Object(n.useState)(!1),d=Object(l.a)(m,2),f=d[0],p=d[1],g=Object(i.d)((function(e){return e.dashboard})).dataUserDetail,v=Object(s.f)(),b=function(){p(!1)};return r.a.createElement("div",{className:"header-root"},r.a.createElement("div",{className:"row space"},r.a.createElement("div",{className:"page-title"},r.a.createElement("h1",null,a)),r.a.createElement("div",{className:"user-profile",onClick:function(e){return function(e){e.preventDefault(),u(e.currentTarget),p(!f)}(e)}},r.a.createElement("div",{className:"row user-data"},r.a.createElement(G.a,{src:g.img}),r.a.createElement("h3",null,g.name),f?r.a.createElement(B.a,null):r.a.createElement(K.a,null)))),r.a.createElement(M.a,{open:f,anchorEl:c,placement:"bottom",transition:!0},(function(e){var a=e.TransitionProps;return r.a.createElement(R.a,{onClickAway:b},r.a.createElement(J.a,Object.assign({},a,{timeout:350}),r.a.createElement(z.a,{style:{padding:".5rem 1rem"}},r.a.createElement("p",{onClick:function(e){return function(e){e.preventDefault(),localStorage.removeItem("gallery-access-token"),localStorage.removeItem("gallery-token-exp"),localStorage.removeItem("gallery-user-data"),v.replace("/login")}(e)},style:{cursor:"pointer"}},"Log Out"))))})))},Z=function(){return function(e){var a="UserDetail";e(function(e,a){return{type:"Login/Loading",isLoading:e,key:a}}(!0,a)),C().then((function(t){e(function(e,a){return{type:"Login/Success",data:e,key:a}}(t.data,a))})).catch((function(t){e(function(e,a){return{type:"Login/Failed",message:e,key:a}}(t.msg,a))}))}};var X=function(){var e=Object(i.c)();return Object(n.useEffect)((function(){e(Z())}),[e]),r.a.createElement("div",{className:"container-fluid"},r.a.createElement(V,{title:"Dashboard"}),r.a.createElement("h1",null,"hehe"))},Y=function(){var e=Object(s.f)();return Object(n.useEffect)((function(){localStorage.getItem("gallery-access-token")?(new Date).getTime()>1e3*localStorage.getItem("gallery-token-exp")&&(localStorage.removeItem("gallery-access-token"),localStorage.removeItem("gallery-token-exp"),localStorage.removeItem("gallery-user-data"),e.replace("/login")):e.replace("/login")}),[e]),r.a.createElement(v,null,r.a.createElement(s.a,{exact:!0,path:"/portofolio_admin/",component:X}))},$=function(e){var a=e.store,t=Object(n.useState)(window.innerWidth),o=Object(l.a)(t,2),c=o[0],m=o[1];return Object(n.useEffect)((function(){function e(){m(window.innerWidth)}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[c]),r.a.createElement(i.a,{store:a},r.a.createElement(h,null,r.a.createElement(u.a,null,r.a.createElement(s.c,null,r.a.createElement(s.a,{exact:!0,path:"/login",component:T}),r.a.createElement(s.a,{exact:!0,component:Y})))))},q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e,a){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Q=t(127),ee=t(62),ae=t(7),te=t(125),ne=t(294),re=t(19),oe=t(16),ce={isLoadingLogin:!1,message:""};var le={isLoadingLogin:!1,isLoadingGallery:!1,isLoadingAlbum:!1,isLoadingUserDetail:!1,isLoadingContact:!1,dataGallery:[],dataAlbum:[],dataContact:[],dataUserDetail:{},message:""};var ie=Object(ae.combineReducers)({form:ne.a,routing:ee.routerReducer,login:function(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.data,o=t.isLoading,c=t.key,l=t.message;switch(n){case S:return Object(oe.a)(Object(oe.a)({},a),{},Object(re.a)({message:l},"isLoading".concat(c),!1));case"Login/Loading":return Object(oe.a)(Object(oe.a)({},a),{},Object(re.a)({},"isLoading".concat(c),o));case"Login/Success":return Object(oe.a)(Object(oe.a)({},a),{},(e={},Object(re.a)(e,"data".concat(c),r),Object(re.a)(e,"isLoading".concat(c),!1),e));default:return a}},dashboard:function(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.data,o=t.isLoading,c=t.key,l=t.message;switch(n){case"Login/Failed":return Object(oe.a)(Object(oe.a)({},a),{},Object(re.a)({message:l},"isLoading".concat(c),!1));case"Login/Loading":return Object(oe.a)(Object(oe.a)({},a),{},Object(re.a)({},"isLoading".concat(c),o));case"Login/Success":return Object(oe.a)(Object(oe.a)({},a),{},(e={},Object(re.a)(e,"data".concat(c),r),Object(re.a)(e,"isLoading".concat(c),!1),e));default:return a}}}),se=t(126),ue=Object(Q.a)(),me=function(e){var a=[Object(ee.routerMiddleware)(ue),te.a];return Object(ae.createStore)(ie,e,Object(se.composeWithDevTools)(ae.applyMiddleware.apply(void 0,a)))}();c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,{store:me})),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/portofolio_admin",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var a="".concat("/portofolio_admin","/service-worker.js");q?(!function(e,a){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):H(e,a)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(a,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):H(a,e)}))}}()}},[[132,1,2]]]);
//# sourceMappingURL=main.b4f4fb67.chunk.js.map